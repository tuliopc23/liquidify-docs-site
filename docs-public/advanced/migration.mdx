# Migration Guide

## Version Upgrade Guide

This guide helps you migrate between LiqUIdify versions, ensuring smooth upgrades while maintaining compatibility and leveraging new features.

## Current Version: 0.6.x

### Latest Stable: 0.6.7

The current stable release includes all essential components and follows semantic versioning. Breaking changes are introduced only in major versions.

## Migration Paths

### 0.5.x → 0.6.x

#### Overview
- **Release**: October 2024
- **Type**: Minor version (backward compatible)
- **Focus**: Component expansion, performance improvements, React 19 support

#### New Features
- **React 19 compatibility** - Full support for latest React features
- **15+ new components** - Expanded component library
- **Improved TypeScript** - Better type inference and stricter types
- **Enhanced accessibility** - WCAG 2.1 AA compliance across all components
- **Performance optimizations** - Reduced bundle size and faster rendering

#### Breaking Changes
None. This is a backward-compatible release.

#### Upgrade Steps

1. **Update dependencies:**
```bash
npm install liquidify-react@latest @ark-ui/react@latest framer-motion@latest
```

2. **Update React (optional):**
```bash
npm install react@19 react-dom@19 @types/react@19 @types/react-dom@19
```

3. **Verify installation:**
```bash
npm run type-check
npm run test
```

### 0.4.x → 0.6.x

#### Overview
- **Release**: Major component library restructure
- **Type**: Minor version with significant changes
- **Focus**: Standardization and component API consistency

#### Breaking Changes

##### Import Path Changes
```tsx
// Before (0.4.x)
import { Button } from 'liquidify-react/components/button'
import { Card } from 'liquidify-react/components/card'

// After (0.6.x)
import { Button } from 'liquidify-react/button'
import { Card } from 'liquidify-react/card'
```

##### Component API Changes
```tsx
// Before: Dialog component
<Dialog isOpen={true} onClose={handleClose}>
  <DialogContent>Content</DialogContent>
</Dialog>

// After: Dialog component (Ark UI pattern)
<Dialog.Root open={true} onOpenChange={handleClose}>
  <Dialog.Content>Content</Dialog.Content>
</Dialog.Root>
```

##### CSS Import Changes
```tsx
// Before
import 'liquidify-react/dist/styles.css'

// After  
import 'liquidify-react/styles'
```

#### Migration Steps

1. **Update package:**
```bash
npm install liquidify-react@latest
```

2. **Update imports:**
```bash
# Use find/replace or run this script
find src -name "*.tsx" -o -name "*.ts" | xargs sed -i 's/liquidify-react\/components\//liquidify-react\//g'
```

3. **Update CSS import:**
```tsx
// Update in your main app file
import 'liquidify-react/styles'
```

4. **Update component usage:**
   - Review component APIs in the [Components](/components) section
   - Update Dialog, Popover, and other compound components to use Ark UI patterns
   - Test all component implementations

5. **Run validation:**
```bash
npm run type-check
npm run lint
npm run test
```

## Future Migrations

### Upcoming: 1.0.x (Planned 2025)

#### Expected Changes
- **Stable API** - Final component API stabilization
- **Theme system** - Advanced theming and customization
- **New components** - Data visualization and advanced layout components
- **Performance** - Further bundle size optimizations

#### Preparation
- Use subpath imports for better compatibility
- Follow component patterns shown in current documentation
- Keep dependencies updated

## Migration Tools

### Automated Migration Script

Create a migration script for common changes:

```javascript
// migrate.js
const fs = require('fs')
const path = require('path')

const migrations = {
  '0.4-to-0.6': {
    imports: {
      'liquidify-react/components/': 'liquidify-react/',
      'liquidify-react/dist/styles.css': 'liquidify-react/styles'
    },
    components: {
      '<Dialog isOpen': '<Dialog.Root open',
      'onClose={': 'onOpenChange={'
    }
  }
}

function migrateFile(filePath, version) {
  let content = fs.readFileSync(filePath, 'utf8')
  const rules = migrations[version]
  
  // Apply import migrations
  Object.entries(rules.imports).forEach(([from, to]) => {
    content = content.replace(new RegExp(from, 'g'), to)
  })
  
  // Apply component migrations
  Object.entries(rules.components).forEach(([from, to]) => {
    content = content.replace(new RegExp(from, 'g'), to)
  })
  
  fs.writeFileSync(filePath, content)
}

// Usage: node migrate.js 0.4-to-0.6 src/
```

### Version Compatibility Checker

```tsx
// version-check.ts
import { version } from 'liquidify-react/package.json'

function checkCompatibility() {
  const [major, minor] = version.split('.').map(Number)
  
  if (major === 0 && minor < 6) {
    console.warn('LiqUIdify version outdated. Please upgrade to 0.6.x')
    console.log('Migration guide: https://docs.liquidify.dev/advanced/migration')
  }
}

checkCompatibility()
```

## Best Practices

### Before Migration
1. **Backup your project** or use version control
2. **Review release notes** for your target version
3. **Update in a feature branch** first
4. **Test thoroughly** before merging

### During Migration
1. **Update incrementally** - one major change at a time
2. **Run tests frequently** to catch issues early
3. **Update TypeScript** to catch type changes
4. **Check browser compatibility** if using new features

### After Migration
1. **Update documentation** to reflect new patterns
2. **Share learnings** with your team
3. **Monitor for issues** in production
4. **Consider contributing** improvements back to LiqUIdify

## Troubleshooting

### Common Issues

#### Build Errors
```bash
# Clear cache and reinstall
rm -rf node_modules package-lock.json
npm install
```

#### Type Errors
```bash
# Update TypeScript and React types
npm install -D typescript@latest @types/react@latest @types/react-dom@latest
```

#### Component Not Found
```tsx
// Check the correct import path
import { ComponentName } from 'liquidify-react/component-name'
```

#### CSS Not Loading
```tsx
// Ensure styles are imported in your app entry
import 'liquidify-react/styles'
```

### Getting Help

- **GitHub Issues** - Report migration problems
- **Discussions** - Ask questions about upgrade strategies
- **Documentation** - Check component-specific migration notes

## Version History

| Version | Release Date | Key Changes |
|---------|-------------|-------------|
| 0.6.7   | Dec 2024    | React 19 support, bug fixes |
| 0.6.0   | Oct 2024    | Component expansion, performance |
| 0.5.0   | Aug 2024    | TypeScript improvements |
| 0.4.0   | Jun 2024    | Initial stable release |

---

**Need help with migration?** Open an issue on GitHub or start a discussion for community support.
